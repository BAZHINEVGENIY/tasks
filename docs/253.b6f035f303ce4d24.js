"use strict";(self.webpackChunktasks=self.webpackChunktasks||[]).push([[253],{7253:(G,h,r)=>{r.r(h),r.d(h,{PROFILE_ROUTES:()=>z});var n=r(7691),t=r(4650),i=r(4006),d=r(9646),U=r(5165),C=r(6667),E=r(9653),m=r(6661),u=r(8391);let L=(()=>{class e{constructor(){(0,n.Z)(this,"store",(0,t.f3M)(E.yh)),(0,n.Z)(this,"isLoading$",this.store.select(u.If)),(0,n.Z)(this,"isLoggedIn$",this.store.select(u.$q)),(0,n.Z)(this,"users$",this.store.select(u.m2)),(0,n.Z)(this,"errors$",this.store.select(u.z8)),(0,n.Z)(this,"update",o=>this.store.dispatch(m.e.updateCurrentUser({request:o})))}}return(0,n.Z)(e,"\u0275fac",function(o){return new(o||e)}),(0,n.Z)(e,"\u0275prov",t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})),e})();var Z=r(6895),I=r(3162),p=r(9549),A=r(4144),f=r(4859),O=r(7784),g=r(9383);function v(e,s){1&e&&t._UZ(0,"tasks-backend-error",13),2&e&&t.Q6J("backendErrors",s.ngIf)}function x(e,s){1&e&&t._UZ(0,"mat-progress-bar",14)}function R(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"PROFILE.ERROR_REQUIRED")," "))}function T(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"PROFILE.ERROR_REQUIRED")," "))}function F(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"PROFILE.ERROR_REQUIRED")," "))}function y(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"PROFILE.ERROR_EMAIL")," "))}function M(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"PROFILE.ERROR_REQUIRED")," "))}const P=function(){return{count:8}};function $(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.xi3(2,1,"PROFILE.ERROR_MINLENGHT",t.DdM(4,P))," "))}let b=(()=>{class e{constructor(){(0,n.Z)(this,"form",void 0),(0,n.Z)(this,"fb",(0,t.f3M)(i.qu)),(0,n.Z)(this,"facade",(0,t.f3M)(L)),(0,n.Z)(this,"isLoading$",this.facade.isLoading$),(0,n.Z)(this,"users$",this.facade.users$),(0,n.Z)(this,"currentUser",void 0),(0,n.Z)(this,"errors$",void 0)}ngOnInit(){this.users$.subscribe(o=>{this.currentUser=o,this.initializeForm()})}initializeForm(){this.form=this.fb.group({image:[this.currentUser?.image,i.kI.required],username:[this.currentUser?.username,i.kI.required],bio:[this.currentUser?.bio,i.kI.required],email:[this.currentUser?.email,[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(8)]]})}get isSavingData(){return this.form.dirty}getErrField(o,a){return this.form.get(`${o}`).hasError(`${a}`)}clearErrors(){this.errors$=(0,d.of)(null)}submit(){const o={...this.currentUser,...this.form.value};this.errors$=this.facade.errors$,this.facade.update(o)}}return(0,n.Z)(e,"\u0275fac",function(o){return new(o||e)}),(0,n.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["tasks-update-current-user"]],standalone:!0,features:[t.jDz],decls:43,vars:37,consts:[[1,"auth"],[3,"formGroup","ngSubmit","input"],[2,"margin","0"],["style","margin-bottom: 5px",3,"backendErrors",4,"ngIf"],["style","margin: 10px 0","mode","indeterminate",4,"ngIf"],["type","text","matInput","","formControlName","image"],[4,"ngIf"],["type","text","matInput","","formControlName","username"],["formControlName","bio",2,"margin-bottom","22px",3,"placeholder"],["type","text","matInput","","formControlName","email"],["autofocus","","type","password","matInput","","formControlName","password"],[1,"auth__btn"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[2,"margin-bottom","5px",3,"backendErrors"],["mode","indeterminate",2,"margin","10px 0"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return a.submit()})("input",function(){return a.clearErrors()}),t.TgZ(2,"mat-label")(3,"h1",2),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.YNc(6,v,1,1,"tasks-backend-error",3),t.ALo(7,"async"),t.YNc(8,x,1,0,"mat-progress-bar",4),t.ALo(9,"async"),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",5),t.YNc(15,R,3,3,"mat-error",6),t.qZA(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",7),t.YNc(21,T,3,3,"mat-error",6),t.qZA(),t._UZ(22,"quill-editor",8),t.ALo(23,"translate"),t.TgZ(24,"mat-form-field")(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",9),t.YNc(29,F,3,3,"mat-error",6),t.YNc(30,y,3,3,"mat-error",6),t.qZA(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",10),t.YNc(36,M,3,3,"mat-error",6),t.YNc(37,$,3,5,"mat-error",6),t.qZA(),t.TgZ(38,"div",11)(39,"button",12),t.ALo(40,"async"),t._uU(41),t.ALo(42,"translate"),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",a.form),t.xp6(3),t.Oqu(t.lcZ(5,17,"PROFILE.TITLE_FORM")),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,19,a.errors$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,21,a.isLoading$)),t.xp6(4),t.Oqu(t.lcZ(13,23,"PROFILE.LABEL_IMAGE")),t.xp6(3),t.Q6J("ngIf",a.getErrField("image","required")),t.xp6(3),t.Oqu(t.lcZ(19,25,"PROFILE.LABEL_USERNAME")),t.xp6(3),t.Q6J("ngIf",a.getErrField("username","required")),t.xp6(1),t.s9C("placeholder",t.lcZ(23,27,"PROFILE.LABEL_QUILL")),t.xp6(4),t.Oqu(t.lcZ(27,29,"PROFILE.LABEL_EMAIL")),t.xp6(3),t.Q6J("ngIf",a.getErrField("email","required")),t.xp6(1),t.Q6J("ngIf",a.getErrField("email","email")),t.xp6(3),t.Oqu(t.lcZ(34,31,"PROFILE.LABEL_PASSWORD")),t.xp6(3),t.Q6J("ngIf",a.getErrField("password","required")),t.xp6(1),t.Q6J("ngIf",a.getErrField("password","minlength")),t.xp6(2),t.Q6J("disabled",a.form.invalid||t.lcZ(40,33,a.isLoading$)),t.xp6(2),t.hij("",t.lcZ(42,35,"PROFILE.BTN")," "))},dependencies:[C.S,Z.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,I.pW,p.KE,p.hX,p.TO,A.Nt,f.lW,O.R,Z.Ov,g.X$,U.g6],styles:[".auth[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:auto;height:90%;min-height:628px;overflow:auto}.auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-basis:500px;min-width:275px;justify-content:center;flex-direction:column;align-items:center;align-self:center;padding:30px;border-radius:20px;border:1px solid slategray}.auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.auth[_ngcontent-%COMP%]   form.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid red}.auth__btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}"],changeDetection:0})),e})();var c=r(493),N=r(263),D=r(3900),Q=r(4004),q=r(262),J=r(2323);let S=(()=>{class e{constructor(){(0,n.Z)(this,"actions$",(0,t.f3M)(c.eX)),(0,n.Z)(this,"authService",(0,t.f3M)(N.e)),(0,n.Z)(this,"storage",(0,t.f3M)(J.V)),(0,n.Z)(this,"updateCurrentUser$",(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.e.updateCurrentUser),(0,D.w)(({request:o})=>this.authService.updateUser(o).pipe((0,Q.U)(a=>(this.storage.set("accessToken",a.token),m.e.updateCurrentUserSuccess({currentUser:a}))),(0,q.K)(a=>(console.log(a),(0,d.of)(m.e.updateCurrentUserFailure({errors:a.error.errors})))))))))}}return(0,n.Z)(e,"\u0275fac",function(o){return new(o||e)}),(0,n.Z)(e,"\u0275prov",t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})),e})();var j=r(7574),l=r(5412);let Y=(()=>{class e{}return(0,n.Z)(e,"\u0275fac",function(o){return new(o||e)}),(0,n.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["tasks-dialog-comfirm-form"]],standalone:!0,features:[t.jDz],decls:14,vars:14,consts:[["mat-dialog-title",""],["align","end"],["mat-stroked-button","",3,"mat-dialog-close"]],template:function(o,a){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content")(4,"p"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"mat-dialog-actions",1)(8,"button",2),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",2),t._uU(12),t.ALo(13,"translate"),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"CONFIRM_MODAL.TITLE")),t.xp6(4),t.Oqu(t.lcZ(6,8,"CONFIRM_MODAL.TEXT")),t.xp6(3),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.Oqu(t.lcZ(10,10,"CANCEL")),t.xp6(2),t.Q6J("mat-dialog-close",!0),t.xp6(1),t.Oqu(t.lcZ(13,12,"CONFIRM")))},dependencies:[l.Is,l.ZT,l.uh,l.xY,l.H8,f.ot,f.lW,g.aw,g.X$],styles:["p[_ngcontent-%COMP%]{text-align:center}"]})),e})();const z=[{path:":username",canActivate:[j.a],canDeactivate:[function X(e){const s=(0,t.f3M)(l.uw);return e.isSavingData?s.open(Y).afterClosed():(0,d.of)(!0)}],providers:[(0,c.y3)(S),(0,t.RIp)(l.Is)],component:b}]}}]);